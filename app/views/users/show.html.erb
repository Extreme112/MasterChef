<!DOCTYPE html>
<html>
<head>
  <title><%= @user.user_name %></title>
</head>
<body>

<div class="container">
  <p id="notice"><%= notice %></p>
  <!--User Image-->
  <div class="row">
    <div class="col-md-3">
      <div class="thumbnail">
      <!--Display user image-->
      <div id="img-display">
        <%= image_tag @user.image_url(:medium).to_s %>
      </div>
      <!--Form to edit user image-->
      <div id="img-edit">
        <% if have_permission %>
            <%= form_for(@user, :html => {:multipart => true,:class => "form-inline"}) do |f| %>
                <%= error_messages_for_users(f.object)%>
                <div class="field form-group">
                  <%= f.file_field :image,{class: 'form-control'}%>
                </div>
                <%= f.submit 'Change image',{class: 'btn btn-primary'}   %>
            <% end %>
        <% end %>
      </div>
      <!--Button to hide/show form-->
      <% if have_permission %>
        <p class="btn btn-default" id="img-edit-button"> change </p>
      <% end %>
      </div>
    </div>

    <div class="col-md-9">
      <!--Page header-->
      <div class="page-header">
        <h1>
          <strong><%= @user.user_name %></strong> <small><strong>| Level:</strong> <%= @user.user_level %>
          <strong>| Privileges:</strong> <%= @user.privileges %>
          <strong>| Points:</strong> <%= @user.points %></small>
        </h1>
      </div>
    </div>
  </div>

  <div class="row">
    <!--Account Info COLUMN-->
    <div class="col-md-3">
      <!--User Name-->
      <div class="row">
        <div class="col-xs-8">
          <!--display User Name-->
          <div id="user-display">
            <p>
              <strong>User name:</strong><br>
              <%= @user.user_name %>
            </p>
          </div>
          <!--edit User Name-->
          <div id="user-edit">
            <% if have_permission %>
                <%= form_for(@user, :html => {:class => "form-inline"}) do |f| %>
                  <%= error_messages_for_users(f.object)%>
                  <div class="field form-group">
                    <%= f.text_field :user_name ,{class: 'form-control'}%>
                  </div>
                  <%= f.submit 'Edit Name',{class: 'btn btn-primary'}   %>
                <% end %>
            <% end %>
          </div>
        </div>
        <div class="col-xs-4">
          <!--Button to hide/show form-->
          <% if have_permission %>
            <p class="btn btn-default" id="user-edit-button"> change </p>
          <% end %>
        </div>
      </div>

      <!--First Name-->
      <div class="row">
        <div class="col-xs-8">
          <!--display First Name-->
          <div id="first-display">
            <p>
              <strong>First name:</strong><br>
              <%= @user.first_name %>
            </p>
          </div>
          <!--edit First Name-->
          <div id="first-edit">
            <% if have_permission %>
                <%= form_for(@user, :html => {:class => "form-inline"}) do |f| %>
                  <%= error_messages_for_users(f.object)%>
                  <div class="field form-group">
                    <%= f.text_field :first_name ,{class: 'form-control'}%>
                  </div>
                  <%= f.submit 'Edit Name',{class: 'btn btn-primary'}   %>
                <% end %>
            <% end %>
          </div>
        </div>
        <div class="col-xs-4">
          <!--Button to hide/show form-->
          <% if have_permission %>
            <p class="btn btn-default" id="first-edit-button"> change </p>
          <% end %>
        </div>
      </div>

      <!--Last Name-->
      <div class="row">
        <div class="col-xs-8">
          <!--display Last Name-->
          <div id="last-display">
            <p>
              <strong>Last name:</strong><br>
              <%= @user.last_name %>
            </p>
          </div>
          <!--edit Last Name-->
          <div id="last-edit">
            <% if have_permission %>
                <%= form_for(@user, :html => {:class => "form-inline"}) do |f| %>
                  <%= error_messages_for_users(f.object)%>
                  <div class="field form-group">
                    <%= f.text_field :last_name ,{class: 'form-control'}%>
                  </div>
                  <%= f.submit 'Edit Name',{class: 'btn btn-primary'}   %>
                <% end %>
            <% end %>
          </div>
        </div>
        <div class="col-xs-4">
          <!--Button to hide/show form-->
          <% if have_permission %>
            <p class="btn btn-default" id="last-edit-button"> change </p>
          <% end %>
        </div>
      </div>

      <!--Email-->
      <div class="row">
        <div class="col-xs-8">
          <!--display Email-->
          <div id="email-display">
            <p>
              <strong>Email:</strong><br>
              <%= @user.email %>
            </p>
          </div>
          <!--edit Email-->
          <div id="email-edit">
            <% if have_permission %>
              <%= form_for(@user, :html => {:class => "form-inline"}) do |f| %>
                  <%= error_messages_for_users(f.object)%>
                  <div class="field form-group">
                    <%= f.text_field :email ,{class: 'form-control'}%>
                  </div>
                  <%= f.submit 'Edit Email',{class: 'btn btn-primary'}   %>
              <% end %>
            <% end %>
          </div>
        </div>
        <div class="col-xs-4">
          <!--Button to hide/show form-->
          <% if have_permission %>
            <p class="btn btn-default" id="email-edit-button"> change </p>
          <% end %>
        </div>
      </div>

    </div>  <!--close first column-->

    <!--new column-->
    <!--User Biography-->
    <div class="col-md-9">
      <div class="jumbotron">
        <!--Display user bio-->
        <div id="bio-display">
          <p><%= simple_format(@user.bio) %></p>
        </div>
        <!--Form for user bio-->
        <div id="bio-edit">
          <%= form_for(@user, :html => {:class => "form-inline"}) do |f| %>
              <%= error_messages_for_users(f.object)%>
              <div class="field form-group">
                <%= f.text_area :bio ,{class: 'form-control'}%>
              </div>
              <%= f.submit 'Update bio',{class: 'btn btn-primary'}   %>
          <% end %>
        </div>
        <!--Button to hide/show form-->
        <% if have_permission %>
          <p class="btn btn-default" id="bio-edit-button"> change </p>
        <% end %>
      </div>
    </div>
  </div>

  <% if have_permission %>
      <div class="row">
        <div class="col-sm-2">
          <p>
            <strong>Password:</strong>
            <%= @user.password %>
          </p>
        </div>

        <div class="col-md-4">
          <%= form_for(@user, :html => {:class => "form-inline"}) do |f| %>
              <%= error_messages_for_users(f.object)%>
              <div class="field form-group">
                <%= f.text_field :password ,{class: 'form-control'}%>
              </div>
              <%= f.submit 'Edit Password',{class: 'btn btn-primary'}   %>
          <% end %>
        </div>

      </div>
  <% end %>


  

  <div class="row">
    <% if is_admin %>
        <div class="col-xs-1">
          <%= form_for(@user, :html => {:class => "form-inline"}) do |f| %>
              <%= error_messages_for_users(f.object)%>
              <div class="field form-group">
                <%= f.hidden_field :privileges, :value => 1 %>
              </div>
              <%= f.submit 'MakeAdmin',{class: 'btn btn-primary'}   %>
          <% end %>
        </div>

        <div class="col-xs-1">
          <%= form_for(@user, :html => {:class => "form-inline"}) do |f| %>
              <%= error_messages_for_users(f.object)%>
              <div class="field form-group">
                <%= f.hidden_field :privileges, :value => 0 %>
              </div>
              <%= f.submit 'MakeNormal',{class: 'btn btn-primary'}   %>
          <% end %>
        </div>
    <% end %>
  </div>

  <!--Display Recipes-->




<div class="row">

<div class="panel panel-primary">
  <div class="panel-heading">Recipes</div>
  <div class="panel-body">
    <% @recipes.each do |recipe|%>
        <p>
          <%= link_to recipe, class:'doNotHover' do %>
            <% if !recipe.image.blank? %>
              <%= image_tag recipe.image_url(:thumb).to_s %>
            <% else %>
              <%= image_tag '/recipePlaceholder.jpg', style: 'height:50px; width:50px'%>
            <% end %>
          <% end %>
          <%= recipe.recipe_name %>
        </p>
    <% end %>
  </div>
  <%= paginate @recipes%>
</div>

</div>

</div>
</body>
</html>